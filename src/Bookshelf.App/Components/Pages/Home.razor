@page "/"
@inject IBookshelfApiClient ApiClient

<section class="card hero">
    <h1>Bookshelf Dashboard</h1>
    <p class="subtitle">Cross-platform reading and audio service with offline continuity.</p>
    <div class="stats-grid">
        <article>
            <span class="label">Books On Shelf</span>
            <strong>@_libraryCount</strong>
        </article>
        <article>
            <span class="label">History Events</span>
            <strong>@_historyCount</strong>
        </article>
    </div>
</section>

<section class="card">
    <h2>Workflow</h2>
    <ol>
        <li>Search a book in the Search tab.</li>
        <li>Add it to shelf and start downloading.</li>
        <li>Read or listen online/offline and track progress/history.</li>
    </ol>
</section>

@code {
    private int _libraryCount;
    private int _historyCount;

    protected override async Task OnInitializedAsync()
    {
        var library = await ApiClient.GetLibraryAsync(userId: 1);
        var history = await ApiClient.GetHistoryAsync(userId: 1);

        _libraryCount = library.Count;
        _historyCount = history.Count;
    }
}
